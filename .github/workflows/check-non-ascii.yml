name: Check Non-ASCII Characters

on:
  push:
    branches:
      - main
      - final
  pull_request:
    branches:
      - main
      - final

jobs:
  check_non_ascii:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Check for non-ASCII characters
        run: |
          # 查找所有非ASCII字符并显示
          if git diff --cached --name-only | grep -E '\.(txt|md|py|js|cpp)$' | xargs grep -P '[^\x00-\x7F]' > result.log; then
            echo "Non-ASCII characters found in the following files:"
            cat result.log
            exit 1
          else
            echo "No non-ASCII characters found."
          fi
